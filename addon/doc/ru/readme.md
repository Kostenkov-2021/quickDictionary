# NVDA Quick Dictionary (Быстрый словарь)

* Автор: Олександр Грищенко
* Версия: 1.1
* Скачать [стабильную версию][1]
* Скачать [версию в разработке][2]

Добро пожаловать в дополнение NVDA Quick Dictionary, которое позволит вам быстро получить словарную статью с переводом слова или словосочетания на выбранный язык при помощи комбинации клавиш. Клавишных команд немного и все они интуитивно понятны и удобны поэтому вы быстро их запомните.
Словарные статьи содержат подробную информацию о слове, такую как часть речи, род, число, варианты перевода, перечень значений, синонимы и подробные примеры. Такая информация будет полезной для людей, изучающих иностранные языки, или стремятся использовать в общении все богатство и разнообразие собственного языка.
Ниже приведены все возможности дополнения и сочетания клавиш для управления ими. По умолчанию все функции вызываются с использованием двухуровневых команд. Но для любого из этих методов вы всегда можете назначить удобные для вас сочетания клавиш. Вы можете сделать это в диалоговом окне NVDA "Настройки" -> "Жесты ввода...".

## Получение словарной статьи
Для того, чтобы получить статью из словаря необходимо сначала выделить слово, которое Вас интересует или скопировать его в буфер обмена. После чего достаточно дважды нажать комбинацию клавиш NVDA+Y.
Существует также другая возможность получения записи из словаря: одноразовое нажатие NVDA+Y переключает клавиатуру в режим управления дополнением, а дальше просто воспользуйтесь клавишей D.

Примечание: Перед тем как выполнить запрос к удаленному сервису дополнение должно получить слово или словосочетание, интересующее пользователя. Последовательность действий, которые дополнение выполняет каждый раз перед обращением к онлайн-словарю:
* Получает выделенный текст и выполняет запрос;
* Если нет выделенного текста - извлекается текстовое содержимое буфера обмена и выполняется удаленный запрос;
* Если буфер обмена пуст или его содержимое не является текстовыми данными - дополнение сообщает об этом пользователю и не выполняет дальнейших действий.

## Режим управления дополнением
Для доступа ко всем функциям дополнения нужно переключиться в режим управления дополнением, это можно сделать нажав однократно NVDA+Y. Вы услышите низкий звуковой сигнал и сможете воспользоваться другими клавишными командами, которые будут описаны ниже. При нажатии клавиши, которая не используется в дополнении, вы услышите другой сигнал, который сообщит об ошибочной команде и режим управления дополнением будет автоматически выключен.

## Анонс выбранной пары языков при работе со словарем
Чтобы узнать текущие исходный язык и язык назначения выполните следующие действия:
1. Включите режим управления дополнением с помощью комбинации клавиш NVDA+Y.
2. Нажмите A, чтобы прослушать, какие языки выбраны для получения данных из словаря.

## Изменение порядка языков для получения перевода
Это можно быстро сделать следующим образом:
1. Выделить слово или словосочетание, которое Вас интересует.
2. Включить режим управления приложением с помощью NVDA+Y, после чего нажать S.
Вы услышите сообщение о том, что языки изменены и полученную из словаря информацию.

Примечание: Каждый раз при изменении языков дополнение выполняет проверку доступна ли новая пара языков для перевода в используемом онлайн-словаре. Если такое сочетание языков отсутствует - вы услышите соответствующее предупреждение.

## Отображение словарной статьи в отдельном окне в виде веб-страницы
Статью из словаря можно открыть в отдельном окне в виде отформатированной веб-страницы:
1. Выделить слово или словосочетание.
2. Включить режим управления дополнением - NVDA+Y.
3. Нажать W.

Примечание: В этом окне можно использовать стандартные команды навигации элементами веб-страницы. Чтобы закрыть окно достаточно нажать Escape или Alt+F4.

## Копирование результатов последнего запроса в буфер обмена
Это можно сделать выполнив следующую последовательность действий:
1. Включить режим управления дополнением - NVDA+Y.
2. Нажать клавишу C.
После этого вы услышите сообщение о том, что данные успешно скопированы и саму словарную статью.

Примечание: Если перед этим еще не выполнялось запросов к удаленному словарю - вы услышите соответствующее предупреждение.
Если в настройках дополнения включена опция копирования словарных статей в буфер обмена, данные будут автоматически копироваться после каждого успешного запроса.

## Диалоговое окно настроек дополнения
Чтобы изменить параметры приложения, нужно открыть диалоговое окно его настроек. Это можна сделать следующим образом: нажмите NVDA+Y, а затем - клавишу O.
На экране появится стандартное диалоговое окно настроек NVDA с открытым разделом дополнения Quick Dictionary (Быстрый словарь).

### Выбор языков для получения переводов
При открытии диалогового окна настроек дополнения, курсор NVDA сразу устанавливается на выпадающий список выбора исходного языка. Вы можете выбрать нужный вам язык из списка и нажать Enter, или Tab для перехода к выбору языка назначения.

Примечание: Список доступных языков назначения зависит от выбранного исходного языка, поэтому язык назначения нужно выбирать только после установки исходного языка.

### Опция "Копировать в буфер обмена"
После установки этой галочки, полученные от словаря данные будут копироваться в буфер обмена после каждого запроса.

### Опция "Автоматически менять порядок языков"
После включения этой опции, дополнение при неуспешных запросах к словарю будет пытаться получить данные повторно поменяв местами исходный язык и язык назначения.

Примечание: Если обратная комбинация языков недоступна - вы будете слышать соответствующее предупреждение об этом каждый раз.

### Опция "Использовать альтернативный сервер"
При включении этой опции, дополнение будет отправлять запросы не напрямую к онлайн-словарю, а использовать альтернативный промежуточный сервер, который перенаправляет все запросы дальше.

### Код доступа к онлайн-словарю
Для использования сервиса онлайн-словарей рекомендуется получить собственный код доступа. По умолчанию в дополнении уже задан предварительно зарегистрированный код доступа. Но используемый в приложении сервис онлайн-словарей накладывает определенные ограничения и лимиты запросов на каждого бесплатного пользователя. Поэтому при массовом использовании одного кода доступа - рано или поздно его могут заблокировать. Во избежание этого рекомендуется зарегистрировать собственный код доступа и указать его в настройках дополнения.
Ссылку для регистрации вы найдете ниже поля для ввода кода доступа, нажав на нее вы перейдете на соответствующую веб-страницу.

Примечание: Ссылка для регистрации отображается только при использовании кода доступа по умолчанию. После того, как вы укажете в настройках собственный код доступа, эта ссылка будет скрыто. Для того, чтобы восстановить код доступа по умолчанию, просто очистите поле для его ввода и нажмите "OK". Исходный код доступа будет восстановлен в конфигурации дополнения и вы увидите его открыв следующий раз диалоговое окно настроек.

## Вызов короткой справки
Чтобы прослушать краткую справочную информацию - перейдите в режим управления дополнением с помощью NVDA+Y и нажмите H. Вы услышите сообщение с перечнем всех доступных клавишных команд и возможностей дополнения.

## Благодарности
Мы очень благодарны всем, кто прикладывает усилия в разработке, переводе и поддержке дополнения:
* Cagri Dogan - перевод на турецкий язык;

В дополнении Quick Dictionary было использовано несколько хороших решений из других гениальных разработок. Благодарим авторов следующих дополнений:
* Instant Translate - Alexy Sadovoy, Beqa Gozalishvili, Mesar Hameed, Alberto Buffolino и другие соавторы.

## Журнал изменений

### Версия 1.1
* изменены сочетания клавиш, которые конфликтовали с другими дополнениями;
* несколько сочетаний клавиш было отключено и дана возможность пользователю самостоятельно назначать их для функций дополнения;
* обновлено описание основных функций дополнения;
* обновлена справка и переводы дополнения;
* исправлена ошибка в украинском переводе (спасибо Владимиру Перогу);
* добавлен русский перевод.

### Версия 1.0: особенности реализации
* выполнение запросов к удаленному серверу в отдельном потоке, чтобы не блокировать работу NVDA;
* вывод сигналов при ожидании ответа от сервера;
* кеширование последних 100 запросов для снижения нагрузки на службу онлайн-словаря;
* реализован переход в режим управления дополнением;
* добавлена возможность использования альтернативного сервера;
* диалоговое окно настроек дополнения.

## Внесение изменений в NVDA QuickDictionary
Вы можете клонировать этот репозиторий, чтобы внести изменения в NVDA Quick Dictionary.

### Сторонние зависимости
Следующие модули могут быть установлены при помощи pip:
- markdown
- scons
- python-gettext

### Упаковка дополнения для распространения
1. Откройте командную строку, перейдите в корневой каталог этого репозитория.
2. Запустите команду **scons**. Созданное дополнение при отсутствии ошибок будет помещено в текущий каталог.

[1]: https://github.com/grisov/quickDictionary/releases/download/v1.1/quickDictionary-1.1.nvda-addon
[2]: https://github.com/grisov/quickDictionary/releases/download/v1.1/quickDictionary-1.1.nvda-addon
